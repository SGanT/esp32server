"use strict";(self.webpackChunknews_app=self.webpackChunknews_app||[]).push([[746],{4746:(S,u,r)=>{r.r(u),r.d(u,{NewsListPageModule:()=>J});var a=r(6814),g=r(4670),e=r(4946),m=r(7735);function _(n,i){if(1&n&&e._UZ(0,"img",5),2&n){const t=e.oxw(2);e.Q6J("src",null==t.card?null:t.card.titleImageUrl,e.LSH)}}function w(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",1),e.YNc(1,_,1,1,"img",2),e.TgZ(2,"span",3),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"p",4),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.navigate(s.card))}),e._uU(6),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.card?null:t.card.titleImageUrl),e.xp6(2),e.Oqu(e.Dn7(4,3,null==t.card?null:t.card.publishedDate,"dd.MM.yy","ru-RU")),e.xp6(3),e.Oqu(null==t.card?null:t.card.title)}}function h(n,i){1&n&&(e.TgZ(0,"div",1),e._UZ(1,"div",6),e.TgZ(2,"span",7),e._uU(3,"0"),e.qZA(),e.TgZ(4,"p",8),e._UZ(5,"span")(6,"span")(7,"span"),e.qZA()())}let f=(()=>{class n{constructor(t){this.router=t,this.card=null,this.mockMode=!1}ngOnInit(){console.log("card")}navigate(t){null!==t&&t.url&&this.router.navigate(["news-item"].concat(t.url.split("/")),{})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-news-card"]],inputs:{card:["newsItem","card"],mockMode:["mock","mockMode"]},decls:2,vars:2,consts:[["class","news-card",4,"ngIf"],[1,"news-card"],["class","news-card-img","alt","",3,"src",4,"ngIf"],[1,"news-card-chip","text_4"],[1,"news-card-title","text_2",3,"click"],["alt","",1,"news-card-img",3,"src"],[1,"img-placeholder"],[1,"date-paceholder"],[1,"text-placeholder"]],template:function(t,o){1&t&&(e.YNc(0,w,7,7,"div",0),e.YNc(1,h,8,0,"div",0)),2&t&&(e.Q6J("ngIf",!o.mockMode),e.xp6(1),e.Q6J("ngIf",o.mockMode))},dependencies:[a.O5,a.uU],styles:[".news-card[_ngcontent-%COMP%]{margin-top:20px;position:relative}.news-card-img[_ngcontent-%COMP%]{max-width:100%;border-radius:32px}.news-card-chip[_ngcontent-%COMP%]{margin-top:10px;font-size:16px;line-height:20.8px;color:#4b4b4b;background-color:#ebebeb;padding:8px 12px;border-radius:25px;display:inline-block}.news-card-title[_ngcontent-%COMP%]{margin-top:10px;cursor:pointer}.img-placeholder[_ngcontent-%COMP%]{width:100%;border-radius:32px;background-color:#cacaca;height:25vh;animation:_ngcontent-%COMP%_placeholder 2s infinite}.date-paceholder[_ngcontent-%COMP%]{margin-top:10px;font-size:16px;line-height:20.8px;color:#4b4b4b;background-color:#ebebeb;padding:8px 12px;border-radius:25px;display:inline-block;width:30%;color:transparent;animation:_ngcontent-%COMP%_placeholder 2s infinite}.text-placeholder[_ngcontent-%COMP%]{position:relative}.text-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:5px;font-size:16px;line-height:20.8px;color:#4b4b4b;background-color:#e0e0e0;padding:8px 12px;border-radius:25px;display:inline-block;width:100%;color:transparent;box-sizing:border-box;animation:_ngcontent-%COMP%_placeholder 1s infinite}@keyframes _ngcontent-%COMP%_placeholder{0%{background:rgb(202,202,202) 100%}50%{background:rgb(160,160,160) 100%}to{background:rgb(202,202,202) 100%}}"]}),n})();const b=["listContainer"];function x(n,i){1&n&&e._UZ(0,"app-news-card",5),2&n&&e.Q6J("newsItem",i.$implicit)}function C(n,i){1&n&&e._UZ(0,"app-news-card",5),2&n&&e.Q6J("newsItem",i.$implicit)}let P=(()=>{class n{constructor(){this.newsList=[],this.localNewsList=[],this.loadPage=new e.vpe}ngOnInit(){}onScroll(t){const o=this.listContainerRef.nativeElement.getBoundingClientRect();o.top>=0&&o.left>=0&&o.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&o.right<=(window.innerWidth||document.documentElement.clientWidth)&&this.loadPage.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-news-list"]],viewQuery:function(t,o){if(1&t&&e.Gf(b,5),2&t){let s;e.iGM(s=e.CRH())&&(o.listContainerRef=s.first)}},hostBindings:function(t,o){1&t&&e.NdJ("scroll",function(c){return o.onScroll(c)},!1,e.Jf7)},inputs:{newsList:"newsList",localNewsList:"localNewsList"},outputs:{loadPage:"loadPage"},decls:7,vars:2,consts:[[1,"news-list-wrapper"],[1,"news-list"],[3,"newsItem",4,"ngFor","ngForOf"],[1,"loader","text_4"],["listContainer",""],[3,"newsItem"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,x,1,1,"app-news-card",2),e.YNc(3,C,1,1,"app-news-card",2),e.qZA()(),e.TgZ(4,"div",3,4),e._uU(6," *some fancy loader stuff*\n"),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngForOf",o.localNewsList),e.xp6(1),e.Q6J("ngForOf",o.newsList))},dependencies:[a.sg,f],styles:["@media screen and (min-width: 1024px){.news-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:left}.news-list[_ngcontent-%COMP%]   app-news-card[_ngcontent-%COMP%]{width:50%;padding:0 16px;box-sizing:border-box}}@media screen and (min-width: 1920px){.news-list-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.news-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:80%}.news-list[_ngcontent-%COMP%]   app-news-card[_ngcontent-%COMP%]{width:33.33%;padding:0 16px;box-sizing:border-box}}"]}),n})();var p=r(95),v=r(7394);const N=["fileInput"];function M(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",19)(1,"button",20),e.NdJ("click",function(){const c=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.removeImage(c))}),e._UZ(2,"img",21),e.qZA(),e._UZ(3,"img",22),e.qZA()}if(2&n){const t=i.$implicit;e.xp6(3),e.Q6J("src",t,e.LSH)}}function O(n,i){if(1&n&&(e.TgZ(0,"div",17),e.YNc(1,M,4,1,"div",18),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.SelectedImagesSrc)}}function I(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"h3"),e._uU(3,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"),e.qZA(),e.TgZ(4,"button",5),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.hidePopup())}),e._UZ(5,"img",6)(6,"img",7),e.qZA()(),e.TgZ(7,"form",8),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.submitForm())}),e.TgZ(8,"div",9),e._UZ(9,"input",10),e.qZA(),e.TgZ(10,"div",9),e._UZ(11,"textarea",11),e.qZA(),e.TgZ(12,"div",9)(13,"button",12),e.NdJ("click",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.uploadImage(s))}),e._uU(14,"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"),e.qZA()(),e.YNc(15,O,2,1,"div",13),e.TgZ(16,"div",9)(17,"button",14),e._uU(18," \u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c "),e.qZA()(),e.TgZ(19,"input",15,16),e.NdJ("change",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.filesSelected(s))}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(7),e.Q6J("formGroup",t.formGroup),e.xp6(8),e.Q6J("ngIf",t.SelectedImagesSrc.length),e.xp6(2),e.Q6J("disabled",t.formGroup.invalid),e.xp6(2),e.Q6J("multiple",!1)}}function Z(n,i){if(1&n&&e._UZ(0,"img",27),2&n){const t=e.oxw(2);e.Q6J("src",t.addedItem.titleImageUrl,e.LSH)}}function L(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"h3"),e._uU(3,"\u0413\u043e\u0442\u043e\u0432\u043e"),e.qZA(),e.TgZ(4,"button",5),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.hidePopup())}),e._UZ(5,"img",6)(6,"img",7),e.qZA()(),e.TgZ(7,"div",23),e.YNc(8,Z,1,1,"img",24),e.TgZ(9,"p",25),e._uU(10),e.qZA()(),e.TgZ(11,"div",9)(12,"button",26),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.hidePopup())}),e._uU(13," \u041e\u043a\u0435\u0439 "),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(8),e.Q6J("ngIf",t.addedItem.titleImageUrl.length>0),e.xp6(2),e.Oqu(t.addedItem.text)}}let k=(()=>{class n{constructor(t){this.eventBus=t,this.selectedImages=null,this.SelectedImagesSrc=[],this.addedItem=null,this.formGroup=new p.cw({}),this.subscriptions=new v.w0}ngOnInit(){this.formGroup=new p.cw({title:new p.NI("",p.kI.required),text:new p.NI("",p.kI.required)});let t=this.eventBus.on("local-news/news-item-added",o=>this.addedItem=o);this.subscriptions.add(t)}ngOnDestroy(){this.subscriptions.unsubscribe()}hidePopup(){this.SelectedImagesSrc=[],this.selectedImages=null,this.formGroup.reset(),this.eventBus.emit({type:"add-news-popup/hide-popup",value:null})}uploadImage(t){t.preventDefault(),this.fileInputRef&&this.fileInputRef.nativeElement.click()}filesSelected(t){if(null==t||null==t.target)return;const o=t.target.files;null==o||null==o[0]||(this.selectedImages=o,this.SelectedImagesSrc=[],Object.keys(o).forEach(s=>this.imageReader(o[Number(s)])),console.log(o))}imageReader(t){const o=new FileReader;o.onload=s=>{this.SelectedImagesSrc.push(String(o.result))},o.readAsDataURL(t)}removeImage(t){this.selectedImages=null,this.SelectedImagesSrc=[]}submitForm(){if(this.formGroup.valid){let t=this.formGroup.value;this.eventBus.emit({type:"add-news-popup/create-local-news",value:{title:t.title,text:t.text,titleImageUrl:this.SelectedImagesSrc.length>0?this.SelectedImagesSrc[0]:""}})}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.Y))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-news-popup"]],viewQuery:function(t,o){if(1&t&&e.Gf(N,5),2&t){let s;e.iGM(s=e.CRH())&&(o.fileInputRef=s.first)}},decls:4,vars:2,consts:[[1,"popup"],["class","popup-content",4,"ngIf"],[1,"popup-background",3,"click"],[1,"popup-content"],[1,"popup-header"],[1,"close-popup-btn",3,"click"],["src","../../../../../assets/img/cross.svg","alt","",1,"mobile"],["src","../../../../../assets/img/white_cross.svg","alt","",1,"desktop"],[1,"popup-form",3,"formGroup","ngSubmit"],[1,"input-row"],["formControlName","title","type","text","placeholder","\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",1,"text_4"],["formControlName","text","placeholder","\u0422\u0435\u043a\u0441\u0442",1,"text_4"],[1,"btn","upload-img-btn","text_4",3,"click"],["class","input-row selected-images-container",4,"ngIf"],["type","submit",1,"btn","submit-btn","text_4",3,"disabled"],["type","file","accept",".png,.jpg",1,"hidden",3,"multiple","change"],["fileInput",""],[1,"input-row","selected-images-container"],["class","selected-image-wrap",4,"ngFor","ngForOf"],[1,"selected-image-wrap"],[1,"remove-img-btn",3,"click"],["src","../../../../../assets/img/white_cross.svg","alt",""],["alt","",1,"selected-image",3,"src"],[1,"popup-flex"],["class","preview-image","alt","",3,"src",4,"ngIf"],[1,"text_2"],[1,"btn","submit-btn","text_4",3,"click"],["alt","",1,"preview-image",3,"src"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,I,21,4,"div",1),e.YNc(2,L,14,2,"div",1),e.qZA(),e.TgZ(3,"div",2),e.NdJ("click",function(){return o.hidePopup()}),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!o.addedItem),e.xp6(1),e.Q6J("ngIf",o.addedItem))},dependencies:[a.sg,a.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u],styles:[".popup-background[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;top:0;left:0;background-color:#000;opacity:.4;z-index:1001}.popup[_ngcontent-%COMP%]{position:fixed;width:90%;top:15px;left:5%;right:5%;z-index:1002;background:rgb(245,245,245);border-radius:16px;box-sizing:border-box}.popup-content[_ngcontent-%COMP%]{padding:16px;position:relative}.popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.close-popup-btn[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;border:0;background:rgb(235,235,235);transition:ease-in .1s}.close-popup-btn[_ngcontent-%COMP%]:hover{background:rgb(224,224,224)}.input-row[_ngcontent-%COMP%]{margin-top:16px;display:flex;position:relative}.input-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-row[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:rgb(235,235,235);padding:16px;box-sizing:border-box;border-radius:16px;border:0;outline:none;width:100%}.input-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{text-align:center;padding:16px 24px;width:100%;border-radius:16px;transition:ease-in .1s;border:0}.input-row[_ngcontent-%COMP%]   .upload-img-btn[_ngcontent-%COMP%]{color:#526ed3;border:1px dotted rgb(82,110,211)}.input-row[_ngcontent-%COMP%]   .upload-img-btn[_ngcontent-%COMP%]:hover{background-color:#ebebeb}.input-row[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background:rgb(32,32,32);color:#fff}.input-row[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover{background:rgb(75,75,75)}.input-row[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:disabled{background:rgb(224,224,224);color:#757575}.selected-images-container[_ngcontent-%COMP%]{display:flex;position:relative}.selected-images-container[_ngcontent-%COMP%]   .selected-image-wrap[_ngcontent-%COMP%]{max-width:40%;position:relative}.selected-images-container[_ngcontent-%COMP%]   .selected-image-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:16px}.selected-images-container[_ngcontent-%COMP%]   .remove-img-btn[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;border:0;background:rgb(32,32,32);position:absolute;top:-8px;right:-8px;transition:ease-in .1s}.selected-images-container[_ngcontent-%COMP%]   .remove-img-btn[_ngcontent-%COMP%]:hover{background:rgb(75,75,75)}.preview-image[_ngcontent-%COMP%]{max-width:100%;border-radius:16px;margin:16px 0}@media screen and (min-width: 1024px){.popup[_ngcontent-%COMP%]{width:40%;left:30%;top:50%;transform:translateY(-50%)}.popup-content[_ngcontent-%COMP%]{padding:16px 10%;position:relative}.close-popup-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:-30px;background:transparent}.close-popup-btn[_ngcontent-%COMP%]:hover{background:transparent}.popup-flex[_ngcontent-%COMP%]{display:flex}.popup-flex[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30%;margin-right:16px}}"]}),n})();function y(n,i){1&n&&e._UZ(0,"app-add-news-popup")}const T=[{path:"",component:(()=>{class n{set currentPage(t){this.loadingPage||(this._currentPage=t,this.fetchNewsListItems(t))}get currentPage(){return this._currentPage}constructor(t){this.eventBus=t,this.isPopupShown=!1,this.loadingPage=!1,this._currentPage=1,this.newsList=[],this.localNewsList=[],this.subscriptions=[]}ngOnInit(){let t=this.eventBus.on("local-news/all-local-news",d=>this.onLocalNewsLoaded(d));this.subscriptions.push(t);let o=this.eventBus.on("local-news/news-item-added",d=>this.getLocalNews());this.subscriptions.push(o);let s=this.eventBus.on("news/news-list-page-loaded",d=>this.onNewsPageLoaded(d));this.subscriptions.push(s);let c=this.eventBus.on("header/show-popup",()=>this.isPopupShown=!0);this.subscriptions.push(c);let l=this.eventBus.on("add-news-popup/hide-popup",()=>this.isPopupShown=!1);this.subscriptions.push(l),this.fetchNewsListItems(this.currentPage),this.getLocalNews()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}fetchNewsListItems(t){this.eventBus.emit({type:"news/fetch-news-list-page",value:t}),this.loadingPage=!0}getLocalNews(){this.eventBus.emit({type:"local-news/get-news",value:null})}onNewsPageLoaded(t){this.newsList=this.newsList.concat(t),this.loadingPage=!1}onLocalNewsLoaded(t){this.localNewsList=t,console.log(this.localNewsList)}loadNextPage(){this.currentPage+=1}showPopup(){this.eventBus.emit({type:"header/show-popup",value:null})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.Y))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-news-list-page"]],decls:4,vars:3,consts:[[4,"ngIf"],[3,"newsList","localNewsList","loadPage"],[1,"add-button",3,"click"],["src","../../../assets/img/plus.svg","alt","",1,"plus"]],template:function(t,o){1&t&&(e.YNc(0,y,1,0,"app-add-news-popup",0),e.TgZ(1,"app-news-list",1),e.NdJ("loadPage",function(){return o.loadNextPage()}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return o.showPopup()}),e._UZ(3,"img",3),e.qZA()),2&t&&(e.Q6J("ngIf",o.isPopupShown),e.xp6(1),e.Q6J("newsList",o.newsList)("localNewsList",o.localNewsList))},dependencies:[a.O5,P,k],styles:[".add-button[_ngcontent-%COMP%]{width:60px;height:60px;background:rgb(32,32,32);display:flex;justify-content:center;align-items:center;border-radius:50%;border:0;transition:ease-in .1s;flex-shrink:0;z-index:901}.add-button[_ngcontent-%COMP%]:hover{background:rgb(75,75,75)}@media screen and (max-width: 1023px){.add-button[_ngcontent-%COMP%]{top:calc(94vh - 63px);position:fixed;right:20px}}@media screen and (min-width: 1024px){.add-button[_ngcontent-%COMP%]{top:6px;position:fixed;right:16px}}@media screen and (min-width: 1920px){.add-button[_ngcontent-%COMP%]{right:10%}}"]}),n})()}];let A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[a.ez,g.Bz.forChild(T)]}),n})(),J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[a.ez,A,p.UX]}),n})()}}]);